(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12827857"],{1104:function(e,t,o){"use strict";var r=o("4850"),a=o.n(r);a.a},"1dde":function(e,t,o){var r=o("d039"),a=o("b622"),n=o("2d00"),i=a("species");e.exports=function(e){return n>=51||!r((function(){var t=[],o=t.constructor={};return o[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"25f0":function(e,t,o){"use strict";var r=o("6eeb"),a=o("825a"),n=o("d039"),i=o("ad6d"),l="toString",s=RegExp.prototype,c=s[l],p=n((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=l;(p||d)&&r(RegExp.prototype,l,(function(){var e=a(this),t=String(e.source),o=e.flags,r=String(void 0===o&&e instanceof RegExp&&!("flags"in s)?i.call(e):o);return"/"+t+"/"+r}),{unsafe:!0})},2786:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"content-view"},[o("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.tempList},on:{"expand-change":e.handleMange}},[o("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[o("el-form-item",{attrs:{label:"项目ID:"}},[o("span",[e._v(e._s(t.row.projectId))])]),o("el-form-item",{attrs:{label:"项目名称:"}},[o("span",[e._v(e._s(t.row.projectName))])]),o("el-form-item",{attrs:{label:"负责人:"}},[o("span",[e._v(e._s(e.userInfo.userName))])]),o("el-form-item",{attrs:{label:"学号:"}},[o("span",[e._v(e._s(t.row.userId))])]),o("el-form-item",{attrs:{label:"联系方式:"}},[o("span",[e._v(e._s(e.userInfo.userPhone))])]),o("el-form-item",{attrs:{label:"项目等级:"}},[1===t.row.grade?o("span",[e._v("校级")]):e._e(),2===t.row.grade?o("span",[e._v("省级")]):e._e(),3===t.row.grade?o("span",[e._v("国家级")]):e._e(),0===t.row.grade?o("span",[e._v("无")]):e._e()]),o("el-form-item",{attrs:{label:"指导老师1:"}},[null!==t.row.oneId?o("span",[e._v(e._s(t.row.oneId))]):o("span",[e._v("无")])]),o("el-form-item",{attrs:{label:"指导老师2:"}},[null!==t.row.twoId?o("span",[e._v(e._s(t.row.twoId))]):o("span",[e._v("无")])]),o("el-form-item",{attrs:{label:"立案申请:"}},[1==t.row.sreport?o("span",{staticStyle:{color:"green"}},[e._v("已提交")]):o("span",{staticStyle:{color:"red"}},[e._v("未提交")])]),o("el-form-item",{attrs:{label:"中期报告:"}},[1==t.row.mreport?o("span",{staticStyle:{color:"green"}},[e._v("已提交")]):o("span",{staticStyle:{color:"red"}},[e._v("未提交")])]),o("el-form-item",{attrs:{label:"结案报告:"}},[1==t.row.freport?o("span",{staticStyle:{color:"green"}},[e._v("已提交")]):o("span",{staticStyle:{color:"red"}},[e._v("未提交")])])],1)]}}])}),[o("el-table-column",{attrs:{label:"项目名称",width:"200",prop:"projectName"}}),o("el-table-column",{attrs:{label:"项目负责人学号",width:"130",prop:"userId"}}),o("el-table-column",{attrs:{label:"所属学院",width:"170",prop:"collegeId",formatter:e.GetCollegeName}}),o("el-table-column",{attrs:{label:"项目等级",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.grade?o("span",[e._v("校级")]):e._e(),2===t.row.grade?o("span",[e._v("省级")]):e._e(),3===t.row.grade?o("span",[e._v("国家级")]):e._e(),0===t.row.grade?o("span",[e._v("无")]):e._e()]}}])}),o("el-table-column",{attrs:{label:"中期报告",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.mreport?o("span",{staticStyle:{color:"green"}},[e._v("已提交")]):o("span",{staticStyle:{color:"red"}},[e._v("未提交")])]}}])})],o("el-table-column",{attrs:{label:"中期报告操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(o){return e.mReport(t.$index,t.row)}}},[e._v("查看")]),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(o){return e.mReportApproval(t.$index,t.row)}}},[e._v("审核")]),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(o){return e.setExpert(t.row)}}},[e._v("指派专家")])]}}])})],2),o("div",{staticClass:"block"},[o("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[1,5,10,20],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1),o("div",{staticClass:"sumApp"},[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.sumReport}},[e._v("汇总报表")]),o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.appoint}},[e._v("批量指派")])],1),o("el-dialog",{staticClass:"midReport",attrs:{visible:e.appointedForm,title:"中期报告专家指派"},on:{"update:visible":function(t){e.appointedForm=t}},model:{value:e.appointedForm,callback:function(t){e.appointedForm=t},expression:"appointedForm"}},[o("el-form",{staticStyle:{margin:"0"}},[o("el-form-item",{staticStyle:{width:"102%"},attrs:{label:"可指派列表:","label-width":"120px"}},[o("el-table",{ref:"appointList",staticStyle:{width:"100%","font-size":"12px"},attrs:{data:e.appointList,height:"250",border:""},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection"}}),o("el-table-column",{attrs:{prop:"projectName",label:"文件名",width:"280"}}),o("el-table-column",{attrs:{label:"负责人",width:"80",prop:"userName"}}),o("el-table-column",{attrs:{label:"指导老师",width:"80",prop:"teacherName"}}),o("el-table-column",{attrs:{label:"中期报告",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.submit?o("span",{staticStyle:{color:"red"}},[e._v("未提交")]):e._e(),1===t.row.submit?o("span",{staticStyle:{}},[e._v("已提交")]):e._e()]}}])})],1)],1),o("el-form-item",{staticClass:"appoint",attrs:{label:"指派专家:","label-width":"100px"}},[o("el-dropdown",{attrs:{trigger:"click",placement:"bottom-start"},on:{command:e.handleCommand}},[""==e.chooseExpert?o("span",{staticClass:"el-dropdown-link"},[e._v(" 专家列表 "),o("i",{staticClass:"el-icon-arrow-down el-icon--right"})]):o("span",{staticClass:"el-dropdown-link"},[e._v(" "+e._s(e.chooseExpert)+" "),o("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.expertList,(function(t){return o("el-dropdown-item",{key:t.index,attrs:{command:t.userId}},[e._v("ID:"+e._s(t.userId)+",姓名:"+e._s(t.userName)+",联系方式："+e._s(t.phone))])})),1)],1)],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.submitAppoint}},[e._v("确认指派")])],1)],1),o("el-dialog",{staticClass:"midReport",attrs:{visible:e.dialogFormVisibleNew,title:"审核中期报告"},on:{"update:visible":function(t){e.dialogFormVisibleNew=t}},model:{value:e.dialogFormVisibleNew,callback:function(t){e.dialogFormVisibleNew=t},expression:"dialogFormVisibleNew"}},[o("el-form",{staticClass:"mReportForm"},[o("el-form-item",{attrs:{label:"项目名称:","label-width":"100px"}},[o("span",[e._v(e._s(e.midReportNew.projectName))])]),o("el-form-item",{attrs:{label:"项目编号:","label-width":"100px"}},[o("span",[e._v(e._s(e.midReportNew.projectId))])]),o("el-form-item",{attrs:{label:"学生学号","label-width":"100px"}},[o("span",[e._v(e._s(e.midReportNew.userId))])]),o("el-form-item",{attrs:{label:"评语","label-width":"100px"}},[o("el-input",{model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.pass}},[e._v("通过")]),o("el-button",{attrs:{type:"primary"},on:{click:e.Back}},[e._v("退回")])],1)],1),o("el-dialog",{staticClass:"midReport",attrs:{visible:e.dialogFormVisible,title:"中期报告详情"},on:{"update:visible":function(t){e.dialogFormVisible=t}},model:{value:e.dialogFormVisible,callback:function(t){e.dialogFormVisible=t},expression:"dialogFormVisible"}},[[o("el-form",{staticClass:"mReportForm",attrs:{model:e.midReport}},[o("el-form-item",{attrs:{label:"项目名称:","label-width":"100px"}},[o("span",[e._v(e._s(e.projectName))])]),o("el-form-item",{attrs:{label:"中期报告简介:","label-width":"100px"}},[0==e.changeContentValue?o("span",[o("span",[e._v(e._s(e.content))]),o("a",{staticClass:"changeContent",attrs:{href:"javascript:;"},on:{click:function(t){e.changeContentValue=!0}}},[e._v("修改")])]):o("el-form",{staticClass:"contentForm"},[o("el-input",{model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}),o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.changeContent}},[e._v("确定")])],1)],1),o("el-form-item",{staticClass:"midDisscuss",attrs:{label:"导师评议:","label-width":"100px"}},[0===e.midReport.tapproval?o("span",[e._v("未审核")]):e._e(),1===e.midReport.tapproval?o("span",{staticStyle:{color:"red"}},[e._v("不通过")]):e._e(),2===e.midReport.tapproval?o("span",{staticStyle:{color:"green"}},[e._v("已通过")]):e._e(),3===e.midReport.tapproval?o("span",{staticStyle:{color:"orange"}},[e._v("退回修改")]):e._e()]),o("el-form-item",{staticClass:"midDisscuss",attrs:{label:"学院评议:","label-width":"100px"}},[0===e.midReport.capproval?o("span",[e._v("未审核")]):e._e(),1===e.midReport.capproval?o("span",{staticStyle:{color:"red"}},[e._v("不通过")]):e._e(),2===e.midReport.capproval?o("span",{staticStyle:{color:"green"}},[e._v("已通过")]):e._e(),3===e.midReport.capproval?o("span",{staticStyle:{color:"blue"}},[e._v("退回学生")]):e._e(),4===e.midReport.capproval?o("span",{staticStyle:{color:"orange"}},[e._v("退回导师")]):e._e()]),o("el-form-item",{staticClass:"midDisscuss",attrs:{label:"大创管理评议:","label-width":"100px"}},[0===e.midReport.sapproval?o("span",[e._v("未审核")]):e._e(),1===e.midReport.sapproval?o("span",{staticStyle:{color:"red"}},[e._v("不通过")]):e._e(),2===e.midReport.sapproval?o("span",{staticStyle:{color:"green"}},[e._v("已通过")]):e._e(),3===e.midReport.sapproval?o("span",{staticStyle:{color:"orange"}},[e._v("退回修改")]):e._e()]),o("el-form-item",{staticClass:"midDisscuss",attrs:{label:"评审专家评议:","label-width":"100px"}},[0===e.midReport.eapproval?o("span",[e._v("未审核")]):e._e(),1===e.midReport.eapproval?o("span",{staticStyle:{color:"red"}},[e._v("不通过")]):e._e(),2===e.midReport.eapproval?o("span",{staticStyle:{color:"green"}},[e._v("已通过")]):e._e(),3===e.midReport.eapproval?o("span",{staticStyle:{color:"orange"}},[e._v("暂缓通过")]):e._e()]),o("el-form-item",{attrs:{label:"导师评语:","label-width":"100px"}},[e.midReport.tcomment?o("span",[e._v(e._s(e.midReport.tcomment))]):o("span",[e._v("无")])]),o("el-form-item",{attrs:{label:"学院评语:","label-width":"100px"}},[e.midReport.ccomment?o("span",[e._v(e._s(e.midReport.ccomment))]):o("span",[e._v("无")])]),o("el-form-item",{attrs:{label:"大创管理评语:","label-width":"100px"}},[e.midReport.scomment?o("span",[e._v(e._s(e.midReport.scomment))]):o("span",[e._v("无")])]),o("el-form-item",{attrs:{label:"评审专家:","label-width":"100px"}},[e.midReport.expertName?o("span",[e._v(e._s(e.midReport.expertName))]):o("span",[e._v("无")])]),o("el-form-item",{attrs:{label:"评审专家评语:","label-width":"100px"}},[e.midReport.ecomment?o("span",[e._v(e._s(e.midReport.ecomment))]):o("span",[e._v("无")])]),o("el-form-item",{staticStyle:{width:"90%"},attrs:{label:"文件列表:","label-width":"100px"}},[o("el-table",{staticStyle:{width:"100%","font-size":"12px"},attrs:{data:e.mfiles,height:"250",border:""}},[o("el-table-column",{attrs:{prop:"fname",label:"文件名",width:"210"}}),o("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-link",{attrs:{tag:"a",target:"_blank",href:"http://47.113.80.250:8012/onlinePreview?url="+t.row.furl}},[o("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("预览")])],1),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"mini"},on:{click:function(o){return e.download(t.row)}}},[e._v("下载")]),o("el-popconfirm",{staticStyle:{"margin-left":"10px"},attrs:{confirmButtonText:"确认",cancelButtonText:"不了",icon:"el-icon-info",title:"确定删除该文件吗？"},on:{onConfirm:function(o){return e.deleteFile(t.$index,t.row)}}},[o("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[e._v("删除")])],1)]}}])})],1)],1)],1)],o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("确定")])],1)],2),o("expertTable",{staticClass:"eTable",attrs:{isShow:e.isShow,expertData:e.expert,setExpertPid:e.setExpertPid},on:{cancel:e.cancel}}),o("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"login-bg"})],1)},a=[],n=(o("4160"),o("a434"),o("b0c0"),o("d3b7"),o("4d63"),o("ac1f"),o("25f0"),o("3ca3"),o("159b"),o("ddb0"),o("2b3d"),o("0b22")),i=o("e4f4"),l=o("5620"),s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],attrs:{id:"eTb"}},[o("el-table",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"e-table",staticStyle:{width:"100%"},attrs:{data:e.expertData,stripe:""}},[o("el-table-column",{attrs:{prop:"collegeId",label:"所属学院",width:"180",formatter:e.GetCollegeName}}),o("el-table-column",{attrs:{prop:"userName",label:"姓名",width:"180"}}),o("el-table-column",{attrs:{prop:"userId",label:"专家ID"}}),o("el-table-column",{attrs:{prop:"phone",label:"手机号码"}}),o("el-table-column",{staticClass:"selectColumn",attrs:{prop:"userId"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{class:{select:e.select,isSelect:t.row.isSelect},attrs:{type:"primary",disabled:t.row.isSelect},on:{click:function(o){return e.select(o,t.row)}}},[e._v("选择")])]}}])})],1),o("div",{staticClass:"dialog-footer btn",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticClass:"certain",attrs:{type:"primary"},on:{click:e.certain}},[e._v("确定")]),o("el-button",{staticClass:"cancel",attrs:{type:"primary"},on:{click:e.cancel}},[e._v("取消")])],1)],1)},c=[],p={data:function(){return{collegeList:[{id:1,name:"计算机科学与工程学院"},{id:2,name:"政法学院"},{id:3,name:"电子信息与电气工程学院"},{id:4,name:"地理与旅游学院"},{id:5,name:"数学与大数据学院"},{id:6,name:"化学与材料工程学院"},{id:7,name:"建筑与土木工程学院"},{id:8,name:"旭日广东服装学院"},{id:9,name:"生命科学学院"},{id:10,name:"经济管理学院"},{id:11,name:"体育学院"}],selectId:""}},props:{isShow:{type:Boolean,default:function(){return!1}},expertData:{type:Array,default:function(){return[]}},setExpertPid:{type:Array,default:function(){return[]}}},methods:{GetCollegeName:function(e){for(var t in this.collegeList)if(e.collegeId===this.collegeList[t].id)return this.collegeList[t].name},certain:function(){console.log("expert:"+this.selectId),console.log("reportIds:"+this.setExpertPid),Object(l["c"])({expert:this.selectId,reportIds:this.setExpertPid}).then((function(e){console.log(e)})),this.selectId="",this.$emit("cancel")},cancel:function(){this.selectId="",this.$emit("cancel")},select:function(e,t){this.selectId.length>=1?alert("最多只能选择一位专家！"):(t.isSelect=!0,this.selectId=t.userId)}}},d=p,m=(o("1104"),o("2877")),u=Object(m["a"])(d,s,c,!1,null,"733b3990",null),f=u.exports,h={data:function(){return{tableData:[],userId:"",dialogFormVisible:!1,dialogFormVisibleNew:!1,baseUrl:"",userInfo:[],total:0,tempList:[],currentPage:1,pageSize:10,midReport:[],midReportNew:[],projectName:"",mfiles:[],content:"",changeContentValue:!1,fileShow:!1,mfileNewName:"",mfileForm:new FormData,comment:"",row:{},collegeList:[{id:1,name:"计算机科学与工程学院"},{id:2,name:"政法学院"},{id:3,name:"电子信息与电气工程学院"},{id:4,name:"地理与旅游学院"},{id:5,name:"数学与大数据学院"},{id:6,name:"化学与材料工程学院"},{id:7,name:"建筑与土木工程学院"},{id:8,name:"旭日广东服装学院"},{id:9,name:"生命科学学院"},{id:10,name:"经济管理学院"},{id:11,name:"体育学院"}],isShow:!1,expert:[],setExpertPid:[],getAllList:[],appointList:[],appointedForm:!1,expertList:[],chooseExpert:"",chooseReport:[],expertId:"",reportId:0,setReportId:0}},components:{expertTable:f},created:function(){this.initData()},mounted:function(){var e=this;this.$bus.$on("find",(function(t){var o={},r=new RegExp(/^""/);for(var a in t)r.test(t[a])||0===t[a]||(o[a]=t[a]);Object(l["a"])(o).then((function(t){if(0===t.data.length)alert("该项目未提交中期报告或输入信息错误");else{var o=null;console.log(t),e.tempList=[],t.data.forEach((function(t){o=t,o.userId=t.mreport.userId,o.projectId=t.mreport.projectId,o.mreport=1,o.oneId=t.teacherName,e.collegeList.forEach((function(e){e.name===o.collegeName&&(o.collegeId=e.id)})),e.tempList.push(t)})),console.log(e.tempList)}}))}))},methods:{initData:function(){var e=this;this.userId=localStorage.getItem("USERID"),Object(n["a"])({url:"http://47.113.80.250:9003/project/select/"+this.userId,method:"get"}).then((function(t){return e.tableData=[],t.data.forEach((function(t){e.tableData.push(t)})),e.total=e.tableData.length,e.tempList=e.tableData,console.log(e.tempList),e.tempList}))},GetCollegeName:function(e){for(var t in this.collegeList)if(e.collegeId===this.collegeList[t].id)return this.collegeList[t].name},handleMange:function(e,t){var o=this;Object(n["a"])({url:"http://47.113.80.250:9003/user/select/"+t[0].userId,method:"get"}).then((function(e){o.userInfo=[],o.userInfo=t,o.userInfo.userCollege=e.data.college.collegeName,o.userInfo.userName=e.data.user.userName,o.userInfo.userPhone=e.data.user.phone}))},handleSizeChange:function(e){this.pageSize=e,this.handleCurrentChange(this.currentPage)},handleCurrentChange:function(e){this.currentPage1=e,this.currentChangePage(this.tableData,e),console.log(this.tableData)},currentChangePage:function(e,t){var o=(t-1)*this.pageSize,r=t*this.pageSize;for(this.tempList=[];o<r;o++)e[o]&&this.tempList.push(e[o])},mReportApproval:function(e,t){var o=this;this.row=t,console.log(t),1===t.mreport?(Object(n["a"])({url:"http://47.113.80.250:9003/report/select/"+t.projectId,method:"get"}).then((function(e){o.reportId=e.data.mreport.reportId})),this.midReportNew.projectId=t.projectId,this.midReportNew.projectName=t.projectName,this.midReportNew.userId=t.userId,this.dialogFormVisibleNew=!0):0===t.mreport&&alert("该报告未提交，无法审核！")},pass:function(){var e=this;Object(i["a"])("admin",{approval:2,comment:this.comment,reportId:this.reportId}).then((function(t){e.comment="",e.dialogFormVisibleNew=!1}))},Back:function(){var e=this;Object(i["a"])("admin",{approval:3,comment:this.comment,reportId:this.reportId}).then((function(t){e.comment="",e.dialogFormVisibleNew=!1}))},mReport:function(e,t){var o=this;console.log(t),Object(n["a"])({url:"http://47.113.80.250:9003/report/select/"+t.projectId,method:"get"}).then((function(e){if(200===e.code)return o.projectName=t.projectName,o.midReport=e.data.mreport,o.mfiles=e.data.mfiles,o.content=e.data.mreport.content,o.midReport.expertName=e.data.expertName,e.code;alert(e.message)})).then((function(e){200===e&&(o.dialogFormVisible=!0)}))},mReportNew:function(e,t){console.log(t),1===t.mreport?alert("您已建立了中期报告，请查看并修改"):0===t.mreport&&(this.midReportNew.projectId=t.projectId,this.midReportNew.projectName=t.projectName,this.midReportNew.userId=t.userId,this.dialogFormVisibleNew=!0)},submitMreport:function(){var e=this;Object(n["a"])({url:"http://47.113.80.250:9003/report/student/insert",data:{content:this.midReportNew.content,projectId:this.midReportNew.projectId,userId:this.midReportNew.userId},method:"POST"}).then((function(t){console.log(t),200===t.code?(alert("新建成功！"),e.dialogFormVisibleNew=!1,e.$router.go(0)):alert(t.message)}))},deleteFile:function(e,t){var o=this,r=t.fid;Object(n["a"])({url:"http://47.113.80.250:9003/report/student/file/delete",data:{fileId:r},method:"POST"}).then((function(t){200===t.code?(alert("删除成功"),o.mfiles.splice(e,1)):alert(t.message)}))},changeContent:function(){var e=this;Object(n["a"])({url:"http://47.113.80.250:9003/report/student/update",data:{content:this.content,reportId:this.midReport.reportId},method:"POST"}).then((function(t){alert("修改简介成功！"),e.changeContentValue=!1}))},beforeUpload:function(e){console.log(e);var t=new FormData;console.log(t),t.append("file",e.file),t.append("reportId",this.midReport.reportId),this.mfileForm=t,console.log(this.mfileNewForm),this.fileShow=!0,this.mfileNewName=e.file.name;var o=e.file.size/1024/1024<5;return o||this.$message.error("上传文件大小不能超过 5MB!"),o},submitUpload:function(){var e=this;console.log(this.mfileNewForm),!0!==this.fileShow?alert("请选择上传文件！"):Object(n["a"])({url:"http://47.113.80.250:9003/report/student/file/insert/one",data:this.mfileForm,method:"POST"}).then((function(t){if(200!==t.code)throw err;alert(t.message),e.$router.go(0)})).catch((function(e){alert(e)}))},sumReport:function(){Object(n["a"])({url:"http://47.113.80.250:9003/report/admin/excel",method:"POST",responseType:"blob",headers:{"Content-Type":"application/json"}}).then((function(e){var t=e,o=new Blob([t],{type:"application/ms-excel"}),r="中期报告汇总表.xlsx",a=document.createElement("a");a.download=r,a.href=URL.createObjectURL(o),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}))},setExpert:function(e){var t=this;Object(n["a"])({url:"http://47.113.80.250:9003/report/select/"+e.projectId,method:"get"}).then((function(e){console.log(e),200!==e.code?alert(e.message):200===e.code&&(t.setReportId=e.data.mreport.reportId,t.setExpertPid.push(t.setReportId),t.isShow=!0)})),Object(l["b"])().then((function(e){e.data.forEach((function(e){e.isSelect=!1})),t.expert=e.data}))},cancel:function(){this.isShow=!1},appoint:function(){var e=this;this.appointList=[],this.userId=localStorage.getItem("USERID"),Object(n["a"])({url:"http://47.113.80.250:9003/report/admin/select/all/"+this.userId,method:"GET"}).then((function(t){e.getAllList=t.data,e.getAllList.forEach((function(t){null===t.expertName&&1===t.submit&&e.appointList.push(t),console.log(e.appointList),e.appointedForm=!0}))})),Object(l["b"])().then((function(t){e.expertList=t.data}))},handleSelectionChange:function(e){var t=this;e.forEach((function(e){t.chooseReport.push(e.mreport.reportId)})),console.log(this.chooseReport)},handleCommand:function(e){this.chooseExpert=e},submitAppoint:function(){var e=this;""==this.chooseReport?alert("请选择指派项目"):""==this.chooseExpert?alert("请选择指派专家"):(Object(n["a"])({url:"http://47.113.80.250:9003/report/admin/set/expert",data:{expert:this.chooseExpert,reportIds:this.chooseReport},method:"POST"}).then((function(t){200===t.code&&(alert(t.message),e.$router.go(0))})),this.appointedForm=!1)},download:function(e){Object(n["a"])({url:"http://47.113.80.250:9002/download",data:{fileUrl:e.furl,fileName:e.fname},method:"POST",responseType:"blob"}).then((function(t){var o=t,r=new Blob([o]),a=e.fname,n=document.createElement("a");n.download=a,n.href=URL.createObjectURL(r),document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),document.body.removeChild(n)}))}}},b=h,g=(o("a331"),Object(m["a"])(b,r,a,!1,null,"429ea3f2",null));t["default"]=g.exports},"28ae":function(e,t,o){},"44e7":function(e,t,o){var r=o("861d"),a=o("c6b6"),n=o("b622"),i=n("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==a(e))}},4850:function(e,t,o){},"4d63":function(e,t,o){var r=o("83ab"),a=o("da84"),n=o("94ca"),i=o("7156"),l=o("9bf2").f,s=o("241c").f,c=o("44e7"),p=o("ad6d"),d=o("9f7f"),m=o("6eeb"),u=o("d039"),f=o("69f3").set,h=o("2626"),b=o("b622"),g=b("match"),v=a.RegExp,w=v.prototype,_=/a/g,x=/a/g,y=new v(_)!==_,I=d.UNSUPPORTED_Y,R=r&&n("RegExp",!y||I||u((function(){return x[g]=!1,v(_)!=_||v(x)==x||"/a/i"!=v(_,"i")})));if(R){var S=function(e,t){var o,r=this instanceof S,a=c(e),n=void 0===t;if(!r&&a&&e.constructor===S&&n)return e;y?a&&!n&&(e=e.source):e instanceof S&&(n&&(t=p.call(e)),e=e.source),I&&(o=!!t&&t.indexOf("y")>-1,o&&(t=t.replace(/y/g,"")));var l=i(y?new v(e,t):v(e,t),r?this:w,S);return I&&o&&f(l,{sticky:o}),l},N=function(e){e in S||l(S,e,{configurable:!0,get:function(){return v[e]},set:function(t){v[e]=t}})},C=s(v),j=0;while(C.length>j)N(C[j++]);w.constructor=S,S.prototype=w,m(a,"RegExp",S)}h("RegExp")},5620:function(e,t,o){"use strict";o.d(t,"a",(function(){return a})),o.d(t,"b",(function(){return n})),o.d(t,"c",(function(){return i}));var r=o("0b22");function a(e){return Object(r["b"])({url:"/report/select",data:e,method:"post"})}function n(){return Object(r["b"])({url:"/report/admin/select/expert/all"})}function i(e){return Object(r["b"])({url:"/report/admin/set/expert",data:e,method:"post"})}},7156:function(e,t,o){var r=o("861d"),a=o("d2bb");e.exports=function(e,t,o){var n,i;return a&&"function"==typeof(n=t.constructor)&&n!==o&&r(i=n.prototype)&&i!==o.prototype&&a(e,i),e}},a331:function(e,t,o){"use strict";var r=o("28ae"),a=o.n(r);a.a},a434:function(e,t,o){"use strict";var r=o("23e7"),a=o("23cb"),n=o("a691"),i=o("50c4"),l=o("7b0b"),s=o("65f0"),c=o("8418"),p=o("1dde"),d=o("ae40"),m=p("splice"),u=d("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,h=Math.min,b=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!m||!u},{splice:function(e,t){var o,r,p,d,m,u,v=l(this),w=i(v.length),_=a(e,w),x=arguments.length;if(0===x?o=r=0:1===x?(o=0,r=w-_):(o=x-2,r=h(f(n(t),0),w-_)),w+o-r>b)throw TypeError(g);for(p=s(v,r),d=0;d<r;d++)m=_+d,m in v&&c(p,d,v[m]);if(p.length=r,o<r){for(d=_;d<w-r;d++)m=d+r,u=d+o,m in v?v[u]=v[m]:delete v[u];for(d=w;d>w-r+o;d--)delete v[d-1]}else if(o>r)for(d=w-r;d>_;d--)m=d+r-1,u=d+o-1,m in v?v[u]=v[m]:delete v[u];for(d=0;d<o;d++)v[d+_]=arguments[d+2];return v.length=w-r+o,p}})},e4f4:function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var r=o("0b22");function a(e,t){return Object(r["b"])({url:"/report/"+e+"/approval",method:"post",data:t})}}}]);
//# sourceMappingURL=chunk-12827857.e2faa1dd.js.map